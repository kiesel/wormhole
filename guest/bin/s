#!/bin/bash

set -e -u 
source $(dirname $(realpath $0))/common.inc.sh

PAYLOAD=()
for f in "$@"; do
  if [ '-' = ${f:0:1} ]; then
    PAYLOAD+="$f"
    continue;
  fi

  if [ -r "$f" ]; then
    PAYLOAD+=($(realpath "$f"))
  elif [ -d $(dirname "$f") ]; then
    DIR=$(realpath $(dirname "$f"))
    PAYLOAD+=($DIR/$(basename "$f"))
  else
    PAYLOAD+=($(realpath "$f"))
  fi
done

SEND_COMMAND "EDIT ${PAYLOAD[@]}" 
